(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[20],{213:function(e,t,n){e.exports=n.p+"static/media/logo.4762334b.webp"},435:function(e,t,n){"use strict";n.r(t);var a=n(409),i=n.n(a),r=n(410),l=n(71),o=n(72),s=n(75),c=n(76),u=n(0),d=n.n(u),h=n(74),p=n.n(h),m=n(40),f=n.n(m),g=n(443),v=n(184),E=n(442),b=n(229),y=n(183),w=n(431),S=n(430),O=n(48),x=Object(u.lazy)((function(){return n.e(1).then(n.bind(null,211))})),C=g.a.Text,P={view:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white",minHeight:"70vh"},image:{height:138.89,width:250,marginBottom:30},title:{fontWeight:"bold",marginBottom:2},input:{width:"70%",borderRadius:3,height:40,marginBottom:20}},k=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).successOtpSent=function(){v.b.success("OTP Sent on your entered Mobile Number!")},n.success=function(){v.b.success("Contact Details Submitted Successfully")},n.sendOtpHandler=function(e){e.preventDefault();var t=n.state.phone,a=window.recaptchaVerifier;n.setState({loading:!0});var i=t.includes("+91")?t:"+91"+t;p.a.auth().signInWithPhoneNumber(i,a).then((function(e){console.log(e),n.setState({confirmResult:e,phoneEntered:!0,message:"OTP is sent on your mobile number."}),n.setState({loading:!1}),n.successOtpSent()})).catch((function(e){console.log(e),n.setState({loading:!1,message:"Something went wrong"})}))},n.verifyResult=function(){var e=n.state,t=e.otp,a=e.confirmResult,l=e.phone,o=e.email,s=e.name;a.confirm(t).then((function(e){n.setState({user:e.user,uid:e.user.uid,loading:!0,error:!1}),f.a.put("/vendors/confirm-phone/".concat(n.props.match.params.id),{phone:l.includes("+91")?l:"+91"+l,email:o,contact_person_name:s}).then(function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({loading:!1,isLoggedIn:!0}),n.success(),n.context.setVendorData(t.data.vendor);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),n.setState({loading:!1})}))})).catch((function(e){n.setState({loading:!1,error:!0,message:"Invalid OTP!"})}))},n.disabledPhoneHandler=function(){return 10===n.state.phone.length&&n.state.email&&n.state.name},n.disabledOtpHandler=function(){return n.state.otp},n.state={phoneEntered:!1,phone:"",otp:"",email:"",name:"",confirmResult:null,user:null,uid:null,loading:!1,error:!1,message:"",isLoggedIn:!1},n.recaptcha=d.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this.context,t=e.latitude,n=e.longitude;if(t&&n){console.log(this.props.location.state);var a=this.props.location.state,i=a.email,r=a.phone,l=a.contact_person_name;this.setState({email:i,phone:r.substr(3),name:l}),p.a.auth().useDeviceLanguage(),window.recaptchaVerifier=new p.a.auth.RecaptchaVerifier(this.recaptcha,{size:"invisible",callback:function(e){},"expired-callback":function(){}}),window.recaptchaVerifier.render().then((function(e){window.recaptchaWidgetId=e}))}else this.props.history.push("/")}},{key:"render",value:function(){var e=this,t=this.state,a=t.phone,i=t.email,r=t.name,l=t.phoneEntered,o=t.loading,s=t.error,c=t.message;return t.isLoggedIn&&this.props.history.push("/account-detail-form/".concat(this.props.match.params.id)),d.a.createElement(d.a.Fragment,null,d.a.createElement(E.a,{className:"site-page-header",onBack:function(){e.props.history.goBack()},title:"Contact Verification"}),d.a.createElement("div",{style:P.view},d.a.createElement("img",{src:n(213),style:P.image,alt:"Dollar Industries Ltd."}),d.a.createElement("div",{style:{display:"flex",justifyContent:"center"},ref:function(t){return e.recaptcha=t}}),d.a.createElement(C,{style:P.title},"Name"),d.a.createElement(b.a,{style:P.input,suffix:""===r?"":"Edit",value:r,onChange:function(t){return e.setState({name:t.target.value.toUpperCase()})},placeholder:"Enter Name"}),d.a.createElement(C,{style:P.title},"Phone Number"),d.a.createElement(b.a,{style:P.input,prefix:a.includes("+91")?null:"+91",suffix:""===a?"":"Edit",value:a,placeholder:"Enter 10 digit phone number",onChange:function(t){return e.setState({phone:t.target.value})}}),d.a.createElement(C,{style:P.title},"Email Id"),d.a.createElement(b.a,{style:P.input,suffix:""===i?"":"Edit",value:i,onChange:function(t){return e.setState({email:t.target.value})},placeholder:"Enter valid Email Id"}),l&&d.a.createElement(d.a.Fragment,null,d.a.createElement(C,{style:P.title},"OTP"),d.a.createElement(b.a.Password,{style:P.input,onChange:function(t){return e.setState({otp:t.target.value})},placeholder:"Enter 6 digit OTP",iconRender:function(e){return e?d.a.createElement(w.a,null):d.a.createElement(S.a,null)}})),o?d.a.createElement("div",{style:{textAlign:"center"}},d.a.createElement(y.a,{size:"large"})):l?d.a.createElement(u.Suspense,null,d.a.createElement(x,{disabled:!this.disabledOtpHandler(),title:"Verify OTP",onClick:this.verifyResult})):d.a.createElement(u.Suspense,null,d.a.createElement(x,{disabled:!this.disabledPhoneHandler(),title:"Request OTP",onClick:this.sendOtpHandler})),s&&d.a.createElement("h5",{style:{color:"#d9534f",textAlign:"center"}},c)))}}]),a}(u.Component);k.contextType=O.a,t.default=Object(u.memo)(k)}}]);
//# sourceMappingURL=20.41a1b1c4.chunk.js.map