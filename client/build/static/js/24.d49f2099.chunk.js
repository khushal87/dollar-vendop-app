(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[24],{425:function(e,t,n){"use strict";n.r(t);var a=n(71),r=n(72),o=n(75),i=n(76),c=n(0),l=n.n(c),s=n(74),u=n.n(s),h=n(40),p=n.n(h),d=n(443),m=n(278),f=n(184),g=n(229),b=n(183),v=n(431),E=n(430),w=n(78),y=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,211))})),O=d.a.Text,S=m.a.Option,P={view:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white",marginTop:20},title:{fontWeight:"bold",marginBottom:2},input:{borderRadius:3,height:40,marginBottom:20}},k=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).onChange=function(e){r.setState({phone:e})},r.onSearch=function(e){console.log("search:",e)},r.sendOtpHandler=function(e){e.preventDefault();var t=r.state.phone,n=window.recaptchaVerifier;r.setState({loading:!0});var a=t;u.a.auth().signInWithPhoneNumber(a,n).then((function(e){console.log(e),r.setState({confirmResult:e,phoneEntered:!0,message:"OTP is sent on your mobile number."}),r.setState({loading:!1})})).catch((function(e){console.log(e),r.setState({loading:!1,message:"Something went wrong"})}))},r.onError=function(){f.b.error("Please enter a valid PAN")},r.verifyResult=function(){var e=r.state,t=e.otp,n=e.confirmResult;e.phone;n.confirm(t).then((function(e){r.setState({user:e.user,uid:e.user.uid,loading:!0,error:!1}),p.a.get("/vendors/phone-confirmation/".concat(r.props.pan_no)).then((function(e){r.context.setToken(e.data.token),localStorage.setItem("userToken",e.data.token),r.props.history.push("/gst-listing/".concat(r.props.pan_no))})).catch((function(e){r.onError()}))})).catch((function(e){console.log(e)}))},r.disabledPhoneHandler=function(){return r.state.phone},r.disabledOtpHandler=function(){return r.state.otp},r.state={phoneEntered:!1,phone:"",otp:"",confirmResult:null,user:null,uid:null,loading:!1,error:!1,message:"",isLoggedIn:!1,numbers:[]},r.recaptcha=l.a.createRef(),r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){u.a.auth().useDeviceLanguage(),window.recaptchaVerifier=new u.a.auth.RecaptchaVerifier(this.recaptcha,{size:"invisible",callback:function(e){},"expired-callback":function(){}}),window.recaptchaVerifier.render().then((function(e){window.recaptchaWidgetId=e}))}},{key:"componentDidUpdate",value:function(e){e.numbers!==this.props.numbers&&this.setState({numbers:this.props.numbers})}},{key:"render",value:function(){var e=this,t=this.state,n=(t.phone,t.email,t.name,t.phoneEntered),a=t.loading,r=t.error,o=t.message;return t.isLoggedIn&&this.props.history.push("/account-detail-form/".concat(this.props.match.params.id)),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:P.view},l.a.createElement("div",{ref:function(t){return e.recaptcha=t}}),l.a.createElement(O,{style:P.title},"Phone Number"),l.a.createElement(m.a,{showSearch:!0,style:{width:"100%",marginTop:15,marginBottom:15},placeholder:"Select your Phone Number",optionFilterProp:"children",onChange:this.onChange,onSearch:this.onSearch,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.props.numbers.length>0&&this.props.numbers.map((function(e){return l.a.createElement(S,{value:e.value},e.data)}))),n&&l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{style:P.title},"OTP"),l.a.createElement(g.a.Password,{style:P.input,onChange:function(t){return e.setState({otp:t.target.value})},placeholder:"Enter 6 digit OTP",iconRender:function(e){return e?l.a.createElement(v.a,null):l.a.createElement(E.a,null)}})),a?l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(b.a,{size:"large"})):n?l.a.createElement(c.Suspense,null,l.a.createElement(y,{disabled:!this.disabledOtpHandler(),title:"Verify OTP",onClick:this.verifyResult})):l.a.createElement(c.Suspense,null,l.a.createElement(y,{disabled:!this.disabledPhoneHandler(),title:"Request OTP",onClick:this.sendOtpHandler})),r&&l.a.createElement("h5",{style:{color:"#d9534f",textAlign:"center"}},o)))}}]),n}(c.Component);k.contextType=w.a,t.default=Object(c.memo)(k)}}]);
//# sourceMappingURL=24.d49f2099.chunk.js.map